<html>
<head>
    <title>Chat</title>
    <style>
        #chat{
            height: 500px;
        }
        #chatWrap{
            float:left;
            border:1px solid black;
        }
        #contentWrap{
            display: none;
        }
        .error{
            color:red;
        }
        .whisper{
            color:gray;
        }
    </style>
</head>
    <body>
    <div id="nickWrap">
        <p>Enter username:</p>
        <p id="nickError"></p>
        <form action="" id="setNick">
            <input type="text" size="35" id="nickname">
            <input type="submit">
        </form>
    </div>
    <div id="contentWrap">
        <div id="chatWrap">
            <div id="chat"></div>
            <form action="" id="send-message">
                <input type="text" size="35" id="message">
                <input type="submit">
            </form>
        </div>
        <div id="users"></div>
    </div>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript"></script>
        <script src="http://localhost:4000/socket.io/socket.io.js"></script>
        <script>
            jQuery(document).ready(function($) {
                var socket = io.connect('https://folded-node-socket.herokuapp.com');

                socket.on('connect', function(){
                    console.log('connected')
                });

                // socket.on('message', function (data) {
                //     console.log(data, 'message received')
                // });


            });
        </script>

  <!--       <script>
            jQuery(document).ready(function($) {
                var socket = io.connect('localhost', {port: 4000});
                var $messageForm = $('#send-message');
                var $messageBox = $('#message');
                var $chat = $('#chat');
                var $users = $('#users');
                var $nickForm = $('#setNick');
                var $nickError = $('#nickError');
                var $nickBox = $('#nickname');

                $nickForm.submit(function(e) {
                    e.preventDefault();
                    socket.emit('new user', $nickBox.val(), function(data) {
                        if(data){
                            $('#nickWrap').hide();
                            $("#contentWrap").show();
                        }
                        else{
                            $nickError.html('That username is already taken! Try again.')
                        }
                    });

                    socket.on('usernames', function(data) {
                        var html = '';
                        for (var i = 0; i < data.length; i++) {
                            html += data[i] + '<br/>'
                        }
                        $users.html(html)
                    });

                    $nickBox.val('');
                });


                $messageForm.submit(function(e) {
                    e.preventDefault();
                    // this sends event to server
                    socket.emit('send_message', $messageBox.val(), function (data) {
                         $chat.append('<span class="error">' + data + '</span>');
                    });
                    $messageBox.val('');
                });

                socket.on('whisper', function (data) {
                    $chat.append('<span class="whisper"><b>' + data.nick + ': </b>' + data.message + '</span><br/>');

                });




                socket.on('connect', function(){
                    console.log("connect");
                });


                socket.on('new_message', function (data) {
                    $chat.append('<b>' + data.nick + ': </b>' + data.message + '<br/>');
                });

            });
        </script> -->
    </body>
</html>
